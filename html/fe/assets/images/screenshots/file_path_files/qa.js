function NavBarMenu(n,t){var o=this,s=100,h=500,r=0,c=0,i=0,u=0,l=n,f=t,a=function(){r&&(window.clearTimeout(r),r=null)},v=function(){a();e();u&&(i=$(u).addClass("open"))},e=function(){if(i){if(i.attr("over")||i.find("[over=true]").length>0)return;i.removeClass("open");i.parents("[over!=true].open").removeClass("open")}if(i){var n=i.parents("[over=true]");i=n.length>0?$(n[0]):null}},y=function(){u=this;r=window.setTimeout(v,i?0:s)},p=function(){u=0;c=window.setTimeout(e,h)};$&&$.support.opacity&&$(document).ready(function(){eval(l+".InitMenu();")}).click(o.CloseMenu);this.InitMenu=function(){"ontouchstart"in window||navigator.msMaxTouchPoints||navigator.userAgent.toLowerCase().match(/windows phone os 7/i)?$(f).doubleTapToGo():($(f+".openable").removeClass("openable").hover(y,p),$(f).hover(function(){$(this).attr("over","true")},function(){$(this).removeAttr("over")}))};this.ShowMap=function(n,t){var i=$("#"+t);n.populated||n.populating||(n.populating=!0,i.css({height:"200px",width:"100px"}),i.load("/script/content/Ajax/SiteMap.aspx",function(){n.populated=!0}),window.setTimeout(this.InitMenu,200),n.populated=!0,n.populating=!1);n.populated&&(this.InitMenu(),i.css("margin","0"),i.css("width","auto"),i.css("height","auto"))};$.fn.doubleTapToGo=function(){return!("ontouchstart"in window)&&!navigator.msMaxTouchPoints&&!navigator.userAgent.toLowerCase().match(/windows phone os 7/i)?!1:(this.each(function(){if($(this).hasClass("openable")){var n=!1,t=!1;$(this).bind("touchstart click",function(i){var r=$(this);t&&r.hasClass("openable")&&r[0]!=n[0]&&(i.preventDefault(),n=r,t=!1);i.type==="touchstart"&&(t=!0)});$(document).bind("click touchstart MSPointerDown",function(t){for(var r=!0,u=$(t.target).parents(),i=0;i<u.length;i++)u[i]==n[0]&&(r=!1);r&&(n=!1)})}}),this)}}function InitWatermark(n,t){var i=$("#"+n),r;i&&(i.blur(function(){UpdateWatermark(this,t)}),i.focus(function(){UpdateWatermark(this,t)}),r=$.trim(i.val()),r==""||r==t?(i.val(t),i.addClass("subdue")):r!=""&&r!=t&&i.removeClass("subdue"))}function UpdateWatermark(n,t){if(n){var i=$.trim($(n).val());i==t&&$(n).hasClass("subdue")?($(n).val(""),$(n).removeClass("subdue")):i!=""||$(n).hasClass("subdue")?$(n).removeClass("subdue"):($(n).val(t),$(n).addClass("subdue"))}}function NotificationAlert(n,t,i){var o=this,r=$("#"+n),u=$("#"+t),f=i,e=function(){r.populated||r.populating||(r.populating=!0,u.load(f,{cache:!1},function(){r.populated=!0}),r.populated=!0,r.populating=!1)};this.MarkAsRead=function(n,t,i,r){var u=$("#"+i),f=u.html();return u.html('<img src="/images/animated_loading_blue.gif" align="absmiddle" style="border:0" />'),$.ajax({type:"POST",cache:!1,url:t,data:"{notificationId: "+n+"}",contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(){u.remove();$("#"+r).children().first().removeClass("bold")},error:function(){u.html(f)}}),!1};this.initialise=function(){$(r).bind("mouseover",e)}}function ApproveTip(n,t,i,r,u){var f=$("#"+i);$("#"+r).after('&nbsp;<img id="LoadingImg" src="/images/animated_loading_blue.gif" alt="Approving.." />');$("#ApproveResult").remove();$.ajax({type:"POST",cache:!1,url:n,data:t,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){$("#LoadingImg").remove();n.d.status=="OK"?(f.after('<div id="ApproveResult">'+n.d.html+"<\/div>"),f.slideUp(),u&&u()):f.after('<div id="ApproveResult">'+n.d.html+"<\/div>")}})}function DeleteEntry(n,t,i,r){var u="LoadingImg"+n,f="StatusMsgId"+n;$("#"+i).after('&nbsp;<img id="'+u+'" src="/images/animated_loading_blue.gif" alt="Deleting.." align="absmiddle" />');$("#"+f).remove();$.get(t,function(n){$("#"+u).remove();$("#"+i).parent().after('<br><div class="float-right padded-top" id="'+f+'">'+n+"<\/span>");r&&n&&n.indexOf("Deleted")!=-1&&($("#"+i).remove(),setTimeout(function(){r()},500))})}function RegisterPreviewRefresh(n,t,i,r,u,f,e){previewHelper.interval=n;previewHelper.editorId=t;previewHelper.whatHaveYoutriedId=i;previewHelper.editorInWysiwygMode=r;previewHelper.lastEditorContent="";previewHelper.intervalId=0;previewHelper.objectId=e;previewHelper.editLockStatusUpdateServiceUrl=f;$("#"+t).focusin(function(){UpdatePreview();previewHelper.intervalId=setInterval(UpdatePreview,n)});$("#"+t).focusout(function(){UpdatePreview();clearInterval(previewHelper.intervalId)});$("#"+i).focusin(function(){UpdatePreview();previewHelper.intervalId=setInterval(UpdatePreview,n)});$("#"+i).focusout(function(){UpdatePreview();clearInterval(previewHelper.intervalId)});$("#"+u).change(function(){RefreshPreview(previewHelper);previewHelper.objectId>0&&UpdateEditLockStatus()})}function UpdateEditLockStatus(){if(!(previewHelper.objectId<=0)){var n="{ articleId:   "+previewHelper.objectId+"}";$.ajax({type:"POST",cache:!1,url:previewHelper.editLockStatusUpdateServiceUrl,data:n,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:maxRetryLimit,timeout:5e3,success:function(){},error:function(){}})}}function UpdatePreview(){var n=!1;HasNewNonEmptyContent()?(RefreshPreview(previewHelper),n=!0):previewHelper.lastEditorContent==""&&($("#Preview").html("&hellip;"),n=!0);n&&UpdateEditLockStatus()}function HasNewNonEmptyContent(){var n=GetEditorContent(previewHelper.editorInWysiwygMode,previewHelper.editorId,previewHelper.whatHaveYoutriedId),t;return n?n==""||n==previewHelper.lastEditorContent?(previewHelper.lastEditorContent=n,!1):(previewHelper.lastEditorContent=n,isDebug&&($("#refresh-count").show(),t=$("#refresh-count").html(),t=parseInt(t)+1,$("#refresh-count").html(t)),!0):(previewHelper.lastEditorContent="",!1)}function GetEditorContent(n,t,i){var r="",u=$("#"+i);return(u.length>0&&(r=u.val(),r.length>0&&(r=(n?"<p><b>What I have tried:<\/b><\/p>":"\n\n<b>What I have tried:<\/b>\n\n")+r)),n)?editor.getHTML()+r:$("#"+t)[0].value+r}function TryPostNewEntry(n,t,i){var f=GetEditorContent(t.useWysiwygEditor,t.contentId,t.whatHaveYoutriedId),r=$("#"+n.postErrorDivId),u=$("#"+n.logonErrorDivId);r.hide();u.hide();f.length<n.minContentLength?r.show().html(n.tooShortMsg):i.loggedIn?DoPostEntry(t,n,r):DoLogon(i,t,n,r,u)}function DoLogon(n,t,i,r,u){var f=GetLogonFormJson(n);f!=null?(PreSubmitUI(t),$.ajax({type:"POST",cache:!1,url:n.postUrl,data:f,dataType:"html",tryCount:0,retryLimit:maxRetryLimit,timeout:5e3,success:function(n){var f=n==null||n.length==0;PostSubmitUI(t,f,function(){DoPostEntry(t,i,r)});n==null?r.show().html(i.generalErrorMsg):n.length>0&&(r.show().html("Failed to logon or sign-up"),u.show().html(n))},error:function(n,i,u){var f;if(i=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}f="We have tried to log you on "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.";PostSubmitUI(t,!1);r.show().html(f);return}f=isDebug?GetDebugError(n,i,u):n.status==500?"Oops! There seems to be a server problem. Please try posting your "+t.typeName+" later.":"Oops! There was an unexpected problem adding your "+t.typeName+". Please try again later.";PostSubmitUI(t,!1);r.show().html(f)}})):r.show().html(i.generalErrorMsg)}function GetLogonFormJson(n){var t,i;return n==null?null:(t=$("#"+n.containerId),t.length==0)?null:(i={Email:t.find('input[name$="CurrentEmail"]').val(),Password:t.find('input[name$="CurrentPassword"]').val(),RememberMe:!0},(i.Email.replace(/\s/g,"").length==0||i.Password.replace(/\s/g,"").length==0)&&(i={Email:t.find('input[name$="QuickEmail"]').val(),Password:t.find('input[name$="QuickPassword"]').val(),RememberMe:!0,Name:t.find('input[name$="QuickName"]').val(),AgreeToTerms:t.find(':checkbox[id$="TermsOfUse"]')[0].checked,Subscribe:t.find(':checkbox[id$="AllNewsletters"]')[0].checked}),i)}function DoPostEntry(n,t,i){var u=GetEditorContent(n.useWysiwygEditor,n.contentId,n.whatHaveYoutriedId),r;PreSubmitUI(n);postData={ParentId:n.parentId,Content:u,WysiwygEditorUsed:n.useWysiwygEditor,IgnoreHtml:$("#"+n.ignoreHtmlId)[0].checked};typeof n.recaptchaId=="string"&&n.recaptchaId.length>0&&(r=$("#"+n.recaptchaId),r.length>0&&(postData[n.recaptchaId]=r.val()));$.ajax({type:"POST",cache:!1,url:n.postUrl,data:postData,dataType:"json",tryCount:0,retryLimit:maxRetryLimit,timeout:5e3,success:function(t){var r=t.success;i.show().html("");PostSubmitUI(n,r,function(){Submitted=!0;$("#"+n.containerId).slideUp();$("#new-child-loading").after(unescape(t.html))});r||i.show().html(unescape(t.html))},error:function(t,r,u){var f,e,o;if(r=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){f=this.retryLimit-this.tryCount;f=f<=0?"Last try":f==1?"One attempt remaining":f+" attempts remaining";i.show().html("This is taking longer than expected. "+f);$.ajax(this);return}e="We have tried to add your "+n.typeName+" "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.";PostSubmitUI(n,!1);i.show().html(e);return}o=isDebug?GetDebugError(t,r,u):t.status==500?"Oops! There seems to be a server problem. Please try posting your "+n.typeName+" later.":"Oops! There was an unexpected problem adding your "+n.typeName+". Please try again later.";PostSubmitUI(n,!1);i.show().html(o)}})}function PreSubmitUI(n){n.getEditorObject().signalPostingInProgress();$("#new-child-loading").length==0?$("#"+n.containerId).after('<div id="new-child-loading"><img src="/images/animated_loading_blue.gif" alt="" />&nbsp;<span class="bold">Submitting your '+n.parentTypeName+"<\/span><\/div>"):$("#new-child-loading").show();$("#"+n.containerId).fadeTo("slow",.33);$("#"+n.submitBtnId).attr("disabled",!0);$("#"+n.submitBtnId).css("cursor","wait");$("#"+n.helpTipsId).slideUp()}function PostSubmitUI(n,t,i){$("#new-child-loading").slideUp();t&&i!=null?i():($("#"+n.containerId).fadeTo("normal",1),$("#"+n.submitBtnId).attr("disabled",!1),$("#"+n.submitBtnId).css("cursor","default"))}function GetDebugError(n,t,i){var r="An unexpected error occurred retrieving response.<br />",u,f;return n==null?r:(n.status&&(r+="<b>Response error status<\/b>: "+n.status+".<br />"),t&&(r+="<b>Text-status<\/b>: "+t+".<br />"),i&&i.message&&(u=(i+"").replace(/\\n/g," "),r+='Click <a href="javascript:void(0)" onclick="$(\'#DbgErrorTxt\').toggle()">here<\/a> to show/hide error details.<br />',r+='<div id="DbgErrorTxt" style="display:none">'+u+"<\/div>"),n.responseText&&(f=n.responseText.replace(/\\n/g," "),r+='Click <a href="javascript:void(0)" onclick="$(\'#DbgResponseTxt\').toggle()">here<\/a> to show/hide the response text.<br />',r+='<div id="DbgResponseTxt" style="display:none">'+f+"<\/div>"),r)}function NavBarMenu(n,t){var o=this,s=100,h=500,r=0,c=0,i=0,u=0,l=n,f=t,a=function(){r&&(window.clearTimeout(r),r=null)},v=function(){a();e();u&&(i=$(u).addClass("open"))},e=function(){if(i){if(i.attr("over")||i.find("[over=true]").length>0)return;i.removeClass("open");i.parents("[over!=true].open").removeClass("open")}if(i){var n=i.parents("[over=true]");i=n.length>0?$(n[0]):null}},y=function(){u=this;r=window.setTimeout(v,i?0:s)},p=function(){u=0;c=window.setTimeout(e,h)};$&&$.support.opacity&&$(document).ready(function(){eval(l+".InitMenu();")}).click(o.CloseMenu);this.InitMenu=function(){"ontouchstart"in window||navigator.msMaxTouchPoints||navigator.userAgent.toLowerCase().match(/windows phone os 7/i)?$(f).doubleTapToGo():($(f+".openable").removeClass("openable").hover(y,p),$(f).hover(function(){$(this).attr("over","true")},function(){$(this).removeAttr("over")}))};this.ShowMap=function(n,t){var i=$("#"+t);n.populated||n.populating||(n.populating=!0,i.css({height:"200px",width:"100px"}),i.load("/script/content/Ajax/SiteMap.aspx",function(){n.populated=!0}),window.setTimeout(this.InitMenu,200),n.populated=!0,n.populating=!1);n.populated&&(this.InitMenu(),i.css("margin","0"),i.css("width","auto"),i.css("height","auto"))};$.fn.doubleTapToGo=function(){return!("ontouchstart"in window)&&!navigator.msMaxTouchPoints&&!navigator.userAgent.toLowerCase().match(/windows phone os 7/i)?!1:(this.each(function(){if($(this).hasClass("openable")){var n=!1,t=!1;$(this).bind("touchstart click",function(i){var r=$(this);t&&r.hasClass("openable")&&r[0]!=n[0]&&(i.preventDefault(),n=r,t=!1);i.type==="touchstart"&&(t=!0)});$(document).bind("click touchstart MSPointerDown",function(t){for(var r=!0,u=$(t.target).parents(),i=0;i<u.length;i++)u[i]==n[0]&&(r=!1);r&&(n=!1)})}}),this)}}function scrollToAnchor(n,t){var u,i,r,f;return t=jQuery.extend({speed:1100},t),i=n.indexOf("#"),u=i>0?n.substring(i):n,r=$(u),r.length>0&&(f=r.offset().top,$("html:not(:animated),body:not(:animated)").animate({scrollTop:f},t.speed,function(){window.location.hash=n})),!1}function anchorAnimate(n){$("a.anchorLink").each(function(){var t=this;$(t).click(function(i){i.preventDefault();var e=window.location.href,r=$(t).attr("href"),u,f=r.indexOf("#");return u=f>0?r.substring(f):r,scrollToAnchor(u,n)})})}function NotificationAlert(n,t,i){var o=this,r=$("#"+n),u=$("#"+t),f=i,e=function(){r.populated||r.populating||(r.populating=!0,u.load(f,{cache:!1},function(){r.populated=!0}),r.populated=!0,r.populating=!1)};this.MarkAsRead=function(n,t,i,r){var u=$("#"+i),f=u.html();return u.html('<img src="/images/animated_loading_blue.gif" align="absmiddle" style="border:0" />'),$.ajax({type:"POST",cache:!1,url:t,data:"{notificationId: "+n+"}",contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(){u.remove();$("#"+r).children().first().removeClass("bold")},error:function(){u.html(f)}}),!1};this.initialise=function(){$(r).bind("mouseover",e)}}function AttControl(n,t,i,r){this.Watermark=r;this.FreeTextbox=$("#"+t);this.QuickPick=$("#"+i);this.AttrTable=$("#"+n);this.AttrCheckboxes=this.AttrTable.find(".attr :checkbox, .sub-attr :checkbox");this.AttrCheckboxLbls=this.AttrTable.find(".attr label, .sub-attr label");this.GetFreeText=function(){var n=this.FreeTextbox.val();return n==this.Watermark?"":n};this.ClearFreeText=function(){this.GetFreeText()&&(this.FreeTextbox.val(""),UpdateWatermark(this.FreeTextbox[0],this.Watermark))};this.ToggleChildAttrsVisibility=function(n){if(!(n<=0)){var t=this.AttrTable.find("div[parent="+n+"]");return $.each(t,function(){$(this).toggle()}),!1}};this.ClearScrollChecks=function(){this.AttrCheckboxes.prop("checked",!1);this.FreeTextbox.length>0&&(this.FreeTextbox.val(""),UpdateWatermark(this.FreeTextbox[0],this.Watermark))};this.IterateCheckboxes=function(){var i,n,t,r;if(this.AttrCheckboxes.prop("checked",!1),i=this.FreeTextbox.val().replace(/[\s]+/g," ").toLowerCase(),n=i.split(","),!(n.length<=0)){for(t=0;t<n.length;t++)n[t]=$.trim(n[t]);r=this.AttrCheckboxLbls.filter(function(){for(var t=0;t<n.length;t++)if($(this).text().toLowerCase()==n[t])return!0});$.each(r,function(){var n=$(this).attr("for");$("#"+n).prop("checked",!0)})}};this.SetListFromFreeText=function(){this.AttrTable.length>0&&this.IterateCheckboxes()};this.OnVersionCheck=function(n,t,i,r){if(this.AttrTable.length>0&&this.FreeTextbox.length>0){if(this.FreeTextbox.val()==this.Watermark&&this.FreeTextbox.val(""),this.FreeTextbox.val(this.FreeTextbox.val().replace(/[\s]+/g," ")),r)(", "+this.FreeTextbox.val()+",").indexOf(", "+i+",")<0&&(this.FreeTextbox.val()?this.FreeTextbox.val(this.FreeTextbox.val()+", "+i):this.FreeTextbox.val(i));else{var u=(", "+this.FreeTextbox.val()+",").indexOf(", "+i+",");u>=0&&this.FreeTextbox.val(this.FreeTextbox.val().substr(0,u)+this.FreeTextbox.val().substr(u+2+i.length))}this.FreeTextbox.val(this.FreeTextbox.val().replace(/^[,\s\xA0]+/,"").replace(/[,\s\xA0]+$/,""));UpdateWatermark(this.FreeTextbox[0],this.Watermark)}this.ToggleChildAttrsVisibility(n)};this.SetFreeTextForQuickPick=function(n,t){n&&t&&this.FreeTextbox.length>0&&($.ajax({context:this,url:t+n.value,success:function(n){n!=null&&this.FreeTextbox.val(n)}}),UpdateWatermark(this.FreeTextbox[0],this.Watermark))};this.GetSelectedAttrIds=function(){var n="";return this.AttrTable.length>0&&this.AttrTable.find(".attr :checkbox:checked, .sub-attr :checkbox:checked").each(function(){n+=$(this).val()+","}),n}}function InitWatermark(n,t){var i=$("#"+n),r;i&&(i.blur(function(){UpdateWatermark(this,t)}),i.focus(function(){UpdateWatermark(this,t)}),r=$.trim(i.val()),r==""||r==t?(i.val(t),i.addClass("watermark")):r!=""&&r!=t&&i.removeClass("watermark"))}function UpdateWatermark(n,t){if(n){var i=$.trim($(n).val());i==t&&$(n).hasClass("watermark")?($(n).val(""),$(n).removeClass("watermark")):i!=""||$(n).hasClass("watermark")?$(n).removeClass("watermark"):($(n).val(t),$(n).addClass("watermark"))}}function ReportMe(n,t,i,r,u,f){var e=!0;if(u&&(e=confirm("Are you sure your want to report this item")),e){var o="rpt_",h=GetReportLink(o,n.toString(),t.toString(),i.toString()),s=GetReportStatusMsgElm(o,n.toString(),t.toString(),i.toString(),u),c=$("#"+f).val();ShowReportingMessage(h,s)&&$(s).load(r+"&comments="+escape(c))}return!1}function GetReportLink(n,t,i,r){return $("a[name="+n+t+"_"+i+"_"+r+"]")}function GetReportStatusMsgElm(n,t,i,r,u){var f=document.getElementsByName(n+t+"_"+i+"_"+r)[0];return u?f.parentNode:f.parentNode.parentNode.parentNode}function ShowReportingMessage(n,t){return!n||!t?!1:($(n).css("display","none"),$(t).html('<img src="/images/animated_loading_blue.gif" width="16px" height="16px" border="0">'),$(t).css("display",""),!0)}function CheckForUndo(n){if(!$(n).prop("checkForUndo")){var t=$(n).find(".Undo");$(n).prop("checkForUndo",!0)}}function getInternetExplorerVersion(){var n=-1,t,i;return navigator.appName=="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!=null&&(n=parseFloat(RegExp.$1))),n}function rateItem(n,t,i,r,u,f,e){if(n>0&&t>0){var s=$("div[name=RateItem_"+n+"]").find("input[type=radio]:checked").val(),o=$("[name=RateItem_"+n+"] .RateComment")[0];o=o?o.value.replace(/^\s+|\s+$/g,""):"";s<=0?ShowErrorMessage("You must select a value to vote",n):s<=f&&o==""&&r&&u?ShowErrorMessage("You must provide a comment",n):(u||s>f)&&(PrepElements(n),$.get("/Script/Ratings/Ajax/RateItem.aspx?obid="+n+"&obtid="+t+"&obstid="+i+"&rvv="+s+"&rvc="+escape(o)+(e?"&rdm="+e:""),function(t){ratingAjaxCallback(t,n)}))}return!1}function ratingAjaxCallback(n,t){var i,r;n.length>0&&(i=$("div[name=RateItem_"+t+"] .rating-result span")[0],i&&(i.innerHTML=n,i.style.display=""),i=$("[name=CurRat_"+t+"]")[0],i&&(i.style.display="none"));r=$("div[name=RateItem_"+t+"] .loaderImg")[0];$("div[name=RateItem_"+t+"] .ajaxHist").remove();r&&r.style&&(r.style.display="none");$(".rating-comment").remove()}function PrepElements(n){var t=$("div[name=RateItem_"+n+"] .loaderImg")[0];t&&t.style.display=="none"&&(t.style.display="");t=$("div[name=RateItem_"+n+"] .voteTbl")[0];t&&(t.style.display="none");t=$("div[name=RateItem_"+n+"] .rating-result span")[0];t&&(t.style.display="none");t=$("div[name=RateItem_"+n+"] .rating-comment")[0];t&&(t.style.display="none")}function ShowErrorMessage(n,t){var i=$("div[name=RateItem_"+t+"] .loaderImg")[0];i&&(i.style.display="none")}function starRating(n,t,i){var r=function(n){var t=getInternetExplorerVersion(),r=t>0&&t<=8;$(n).each(function(){$(this).find("input:submit").hide();$(".content",this).length>0&&($(this).find(".voting").hide(),$(this).hover(function(){$(".content",this).hide();$(".voting",this).show()},function(){$(".content",this).show();$(".voting",this).hide()}));var n=$('<div class="rating-star-block"><\/div>');$(this).find("input:radio").each(function(){var f="vote "+this.value,t=$('<a href="#"><\/a>').attr("rating",this.value).text(f).addClass("star outline");r||t.attr("title",f);u(t,i);n.append(t);$(this).is(":checked")&&t.prevAll().andSelf().removeClass("outline").addClass("filled")});$(this).find(".voting").append(n).find("input:radio").hide()})},u=function(n){$(n).click(function(n){var r=$(this),u=$(this).parent(),i=r.attr("rating");u.parent().find("input:radio[value="+i+"]").prop("checked",!0);n.preventDefault();t?t(i):$(this).closest("form").submit()}).hover(function(){$(this).prevAll().andSelf().removeClass("outline").addClass("filled");$(this).nextAll().addClass("outline")},function(){$(this).siblings().andSelf().removeClass("filled").addClass("outline")})};r(n,t)}function SetCommentConfig(n,t,i,r,u,f){commentConfig.baseUrl=n;commentConfig.saveMethod=t;commentConfig.updateMethod=i;commentConfig.replyMethod=f;commentConfig.deleteMethod=r;commentConfig.getPageMethod=u}function HideAllDialogs(){$("div[id=EditDialogPlaceholder]").html("");$("div[id=ReplyDialogPlaceholder]").html("")}function bookmarkMe(n,t,i,r,u,f){var e="bm_",s=u||GetBmkLink(e,n.toString(),t.toString()),o=f||GetBmkStatusMsg(e,n.toString(),t.toString());return LoadWaitMessage(s,o,r)&&$(o).load(i),!1}function watchMe(n,t,i,r,u,f){var e="bmw_",s=u||GetBmkLink(e,n.toString(),t.toString()),o=f||GetBmkStatusMsg(e,n.toString(),t.toString());return LoadWaitMessage(s,o,r)&&$(o).load(i),!1}function GetBmkLink(n,t,i){return $("a[name="+n+t+"_"+i+"]")}function GetBmkStatusMsg(n,t,i){return document.getElementsByName(n+t+"_"+i)[0]}function LoadWaitMessage(n,t,i){return!n||!t?!1:($(n).css("display","none"),i=="large"?$(t).html('<img src="/images/animated_loading" width="32px" height="32px" border="0" class="align-top">'):i=="medium"?$(t).html('<img src="/images/loading.gif" width="24px" height="24px" border="0" class="align-top">'):$(t).html('<img src="/images/animated_loading_blue.gif" width="16px" height="16px" border="0">'),$(t).css("display",""),!0)}var navBarMenu=new NavBarMenu("navBarMenu",".navmenu li"),signinMenu=new NavBarMenu("signinMenu",".member-signin"),memberLinksMenu=new NavBarMenu("memberLinksMenu",".member-links"),notificationsMenu=new NavBarMenu("notificationsMenu",".notification-count"),previewHelper,lastCursorPos,commentConfig,replyDialog,editDialog,processCodeBlocks;(function(n){n.sticky=function(t,i,r){function s(){if(u){var t=u.offset(),n={};return(n.isStickyRequired=r==="top",n.top=t.top,n.left=t.left,n.position=u.css("position"),n.top===-1)?null:n}}function c(){f&&(u.css("position",f.position),u.css("top",f.top),u.css("left",f.left),u.removeClass("stuck"),o=!1)}function l(n){var t=n.offset();return t.width=n.outerWidth(!0),t.height=n.outerHeight(!0),t.right=t.left+t.width,t.bottom=t.top+t.height,t}var e=this,u=n(t),h=10,o=!1,f;e.ReGetOriginalLayout=function(){f&&(c(),f=s(),e.RepositionStickyElement())};e.RepositionStickyElement=function(){var t,a,r,e;i&&i.length&&(t=l(i));a=n(window).scrollTop();r=l(u);t&&r.bottom>t.top?e=r.top-(r.bottom-t.top)-a:a+h>=f.top?e=h:o||(f=s());e&&t&&a+e+r.height>t.top&&(e=r.top-(r.bottom-t.top)-a);e?(u.css("position","fixed"),u.css("top",e),u.css("left",f.left-n(window).scrollLeft()),u.addClass("stuck"),o=!0):c()};e.init=function(){r=r||"top";u&&(f=s(),n(window).bind("resize",e.ReGetOriginalLayout),n(window).bind("scroll",e.RepositionStickyElement))};e.init()};n.fn.sticky=function(t,i){return this.each(function(){new n.sticky(this,t,i)})}})(jQuery);var followService=function(){var n,r,t=function(t,i){var r=new $.Deferred,u;return n=n||"/script/follow/webservices/FollowServices.aspx/",typeof n!="string"&&n.length===0?r.reject("BaseUrl not set"):(u=JSON.stringify(i),$.ajax({type:"POST",cache:!1,url:n+t,data:u,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3}).done(function(n){var t=n?n.d:null;r.resolve(t)}).fail(function(n,t){r.reject(t)})),r.promise()},f=function(n,i){var r={objectTypeId:i.objectTypeId,objectId:i.objectId};return t(n,r)},u=function(n,t){t.isFollowing=n;e(t);n?(t.$followButton.hide(),t.$unfollowButton.show()):(t.$unfollowButton.hide(),t.$followButton.show())},e=function(n){n.$followButton.removeClass("processing");n.$unfollowButton.removeClass("processing")},h=function(n){return f("IsFollowingObject",n).done(function(t){u(t,n)})},p=function(n){return f("FollowObject",n).done(function(){u(!0,n)}).fail(function(){e(n)})},w=function(n){return f("UnfollowObject",n).done(function(){u(!1,n)}).fail(function(){e(n)})},c=function(n,t){var i;t===0?(i="No",n.$timelineLoadTopBtn.hide()):(i=t.toString(),n.$timelineLoadTopBtn.show());n.$timelineCount.html(i)},b=function(n){var i=typeof n.events!="undefined"&&n.events!==null&&n.events.length>0?n.events[0].EventId:null;return(typeof n.criteria=="undefined"||n.criteria===null?t("GetTimelineCount",{categoryId:n.contentCategoryId,filter:n.filter,sinceEventId:i}):t("GetTimelineCountForCriteria",{categoryId:n.contentCategoryId,criteria:n.criteria,sinceEventId:i})).done(function(t){c(n,t)})},k=function(){var n=$.Deferred();return typeof r=="undefined"?t("GetFollowing").done(function(t){r=t.AttributeIds;n.resolve()}).fail(function(){n.reject()}):n.resolve(),n.promise()},ft=function(n){return n?/^[aeiou]/.test(n)?"an":"a":""},d=function(n){return t("FollowAttribute",{attributeId:n})},g=function(n){return t("UnfollowAttribute",{attributeId:n})},nt=function(n,t){(t?d(n):g(n)).done(tt)},l=function(n){n=n||$("body");var t=$(".tags .t",n);t.each(function(){var n=$(this),t=$("a",n),i=parseInt(t[0].dataset.id);isNaN(i)||n.prepend('<img class="follow" src="/images/follow.png" width="12px" height="12px" />')});$("img",t).click(function(){var u=$(this),i=$(this).parent(),r=$("a",i),n=parseInt(r[0].dataset.id),t;isNaN(n)||(t=a(n),nt(n,!t))});v()},a=function(n){return r!==undefined&&r.indexOf(n)>=0},v=function(){k().done(function(){var n=$(".tags .t");n.each(function(){var i,n;$div=$(this);var r=$("a",$div),u=r.attr("data-id"),t=parseInt(u);isNaN(t)?$div.removeClass("followed"):(i=a(t),n=$("img",$div),i?($div.addClass("followed"),$div.attr("title","You are following this tag"),n.attr("src","/images/followed.png")):($div.removeClass("followed"),$div.attr("title","Click the star to follow this tag"),n.attr("src","/images/follow.png")))})})},tt=function(){r=undefined;v()},y=function(n,t,r){var u,f,s,h;if(t!==null&&t.length>0){for(n.$timelineBody.scrollTop(0),r=r||"top",displayMode=n.displayMode||"Full",n.events=n.events||[],r==="top"?(n.events.length>0&&(n.gapTop=t[t.length-1],n.gapBottom=n.events[0]),n.events=t.concat(n.events)):r==="bottom"&&(n.events=n.events.concat(t)),u="",i=0;i<n.events.length;i++)if(f=n.events[i],typeof f!="undefined"&&f!==null&&f.Member!==null&&f.Item!==null){var a=f.Member,e=f.Item,v=e.ObjectSubtypeName!==null?e.ObjectSubtypeName:e.ObjectTypeName;if(displayMode==="Full"){if(u+='<div class="content-list-item">',u+='<div class="row">',u+='<div class="thumbnail">',f.ThumbnailSrc!==null&&(u+='<a href="'+f.ThumbnailUrl+'"><img src="'+f.ThumbnailSrc+'"/><\/a>'),u+="<\/div>\n",u+='<div class="text">',u+='<div class="title">',e.Title!==null&&(u+='<a href="'+e.Url+'">'+e.Title+"<\/a>"),u+="<\/div>\n",u+='<div class="entry">'+v+" "+f.EventTypeName.toLowerCase()+' <span title="'+o(f.OccuredAt)+'">'+o(f.OccuredAt)+'<\/span> by <span class="author"><a href="'+a.Url+'">'+a.Name+"<\/a><\/span> ",e.AssociatedObject!==null&&e.AssociatedObject!==""&&(u+=' on <span class="location"><a href="'+e.AssociatedObjectUrl+'">'+e.AssociatedObject+"<\/a><\/span>"),u+="<\/div>\n",e.Description!==null&&(u+='<div class="description">'+e.Description+"<\/div>"),f.Attributes&&f.Attributes.length>0){for(u+='<div class="tags horizontal">',s=0;s<f.Attributes.length;s++)u+='<div class="t"><a data-id="'+f.Attributes[s].AttributeId+'" href="'+f.Attributes[s].Url+'">'+f.Attributes[s].Name+"<\/a><\/div>";u+="<\/div>\n"}u+="<\/div>\n";u+="<\/div>\n";u+="<\/div>\n"}else displayMode==="Compact"?(h=e.Title,h===null&&(h=v+" on "),u+='<div class="message-list-item">',typeof e.Count!="undefined"&&e.Count!==null&&(u+='<div class="count" title="'+e.CountDescription+'">'+e.Count+" <\/div>"),u+='<div class="title"><a href="'+e.Url+'" title="'+f.EventTypeName.toLowerCase()+" by "+a.Name+" at "+o(f.OccuredAt)+'">'+h+"<\/a>",e.AssociatedObject&&e.AssociatedObject.length>0&&(u+=' - <span class="location">'+e.AssociatedObject+"<\/span>"),u+="<\/div><\/div>\n"):u="<div>Invalid display mode<\/div>"}n.$timelineBody.html(u);r==="top"&&c(n,0);l(n.$timelineBody)}},o=function(n){var t=Math.round((new Date-Date.parse(n))/1e3),r=60,u=r*60,i=u*24,f=i*7,e=i*30,o=i*365;return t<5?"just then.":t<r?t+" seconds ago.":t<2*r?"a minute ago.":t<u?Math.floor(t/r)+" minutes ago.":Math.floor(t/u)==1?"1 hour ago.":t<i?Math.floor(t/u)+" hours ago.":t<i*2?"yesterday":t<f?Math.floor(t/i)+" days ago.":t<f*2?"last week":t<e?Math.floor(t/f)+" weeks ago.":t<e*2?"last month":t<o?Math.floor(t/e)+" months ago.":t<o*2?"last year":Math.floor(t/o)+" years ago."},s=function(n,i){i=i||"top";var r=null,u=null;return i==="top"?(r=n.events!==null&&n.events.length>0?n.events[0].EventId:null,n.$timelineLoadTopBtn.addClass("spin")):i==="bottom"&&(n.$timelineLoadBottomBtn.addClass("spin"),length=n.events.length,u=n.events!==null&&length>0?n.events[length-1].EventId:null),(typeof n.criteria=="undefined"||n.criteria===null?t("GetTimeline",{categoryId:n.contentCategoryId,sinceEventId:r,beforeEventId:u,filter:n.filter,pageSize:n.pageSize}):t("GetTimelineForCriteria",{categoryId:n.contentCategoryId,criteria:n.criteria,sinceEventId:r,beforeEventId:u,pageSize:n.pageSize})).done(function(t){if(n.$timelineLoadTopBtn.removeClass("spin"),n.$timelineLoadBottomBtn.removeClass("spin"),i==="bottom")t.TotalEvents===t.Events.length&&n.$timelineLoadBottomBtn.hide();else if(i==="gap"){var r=$(".load",n.$timelineBody);r.remove()}y(n,t.Events,i)})},it=function(t){(typeof t!="string"||t.length===0)&&dfd.reject("followService: BaseUrl not valid");t[t.length-1]!=="/"&&(t+="/");n=t},rt=function(n,t){var i=new $.Deferred;return n.$followButton=$(n.followButton),n.$unfollowButton=$(n.unfollowButton),n.$followButton.click(function(){n.$followButton.addClass("processing");p(n)}),n.$unfollowButton.click(function(){n.$unfollowButton.addClass("processing");w(n)}),typeof t!="undefined"&&h!==null?(u(t,n),i.resolve()):h(n).done(function(){i.resolve()}).fail(function(n){i.reject(n)}),i.promise()},ut=function(t,i){var f=new $.Deferred,u,r;return(typeof n!="string"||n.length===0)&&f.reject("followService: BaseUrl not valid"),t.displayMode=t.displayMode||"Full",u=t.displayMode==="Full"?"content-list":"message-list",r=$(t.timelineContainer),r.append('<div class="header"><button class="load invisible"><span class="count">No <\/span> New <img src="/images/refresh.gif" width="16" height="16" /><\/button><\/div>').append('<div class="'+u+'"><\/div>').append('<div class="footer"><button class="load invisible no-border"> Load More <img src="/images/refresh.gif" width="16" height="16" /><\/button><\/div>'),t.gapTop=t.gapBottom=null,t.events=t.events||[],t.$timelineContainer=r,t.$timelineHeader=$(".header",r),t.$timelineBody=$("."+u,r),t.$timelineFooter=$(".footer",r),t.$timelineCount=$(".count",r),t.$timelineLoadTopBtn=$(".load",t.$timelineHeader),t.$timelineLoadBottomBtn=$(".load",t.$timelineFooter),t.$timelineAutoLoad=$(".autoload input",r),t.autoload=t.autoload||!1,$.isArray(i)&&i.length>0?y(t,i,"top"):s(t,"top"),window.setInterval(b,3e4,t),t.$timelineLoadTopBtn.click(function(){s(t,"top")}),t.$timelineLoadBottomBtn.click(function(){s(t,"bottom")}),t.$timelineLoadBottomBtn.show(),f.promise()};return{setBaseUrl:it,initFollowObjectButtons:rt,initTimelineUI:ut,initAttributeUI:l}}(),isDebug=!1,maxRetryLimit=3;previewHelper={};lastCursorPos=0,function(n){n.fn.extend({autocomplete:function(t,i){var r=typeof t=="string";return i=n.extend({},n.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?n.Autocompleter.defaults.delay:10,max:i&&!i.scroll?10:150},i),i.highlight=i.highlight||function(n){return n},i.formatMatch=i.formatMatch||i.formatItem,this.each(function(){new n.Autocompleter(this,i)})},result:function(n){return this.bind("result",n)},search:function(n){return this.trigger("search",[n])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(n){return this.trigger("setOptions",[n])},unautocomplete:function(){return this.trigger("unautocomplete")}});n.Autocompleter=function(t,i){function d(){var h=u.selected(),f,o,a,c,y,l;return h?(f=h.result,e=f,i.multiple&&(o=s(r.val()),o.length>1&&(a=i.multipleSeparator.length,c=n(t).selection().start,c<=0&&(c=lastCursorPos),l=0,n.each(o,function(n,t){if(l+=t.length,c<=l)return y=n,!1;l+=a}),o[y]=f,f=o.join(i.multipleSeparator)),f+=i.multipleSeparator),r.val(f),v(),r.trigger("result",[h.data,h.value]),!0):!1}function o(n,t){if(y==f.DEL){u.hide();return}var o=r.val();(t||o!=e)&&(e=o,o=a(o),o.length>=i.minChars?(r.addClass(i.loadingClass),i.matchCase||(o=o.toLowerCase()),g(o,it,v)):(w(),u.hide()))}function s(t){return t?i.multiple?n.map(t.split(i.multipleSeparator),function(i){return n.trim(t).length?n.trim(i):null}):[n.trim(t)]:[""]}function a(r){var u,f;return i.multiple?(u=s(r),u.length==1)?u[0]:(f=n(t).selection().start,u=f==r.length?s(r):s(r.replace(r.substring(f),"")),u[u.length-1]):r}function nt(u,o){i.autoFill&&a(r.val()).toLowerCase()==u.toLowerCase()&&y!=f.BACKSPACE&&(r.val(r.val()+o.substring(a(e).length)),n(t).selection(e.length,e.length+o.length))}function tt(){clearTimeout(h);h=setTimeout(v,200)}function v(){var n=u.visible();u.hide();clearTimeout(h);w();i.mustMatch&&r.search(function(n){if(!n)if(i.multiple){var t=s(r.val()).slice(0,-1);r.val(t.join(i.multipleSeparator)+(t.length?i.multipleSeparator:""))}else r.val(""),r.trigger("result",null)})}function it(n,t){t&&t.length&&c?(w(),u.display(t,n),nt(n,t[0].value),u.show()):v()}function g(r,f,e){var o,s;i.matchCase||(r=r.toLowerCase());o=l.load(r);o&&o.length?f(r,o):typeof i.url=="string"&&i.url.length>0?(s={timestamp:+new Date},n.each(i.extraParams,function(n,t){s[n]=typeof t=="function"?t():t}),n.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:i.dataType,url:i.url,data:n.extend({q:a(r),limit:i.max},s),success:function(n){var t=i.parse&&i.parse(n)||rt(n);l.add(r,t);f(r,t)}})):(u.emptyList(),e(r))}function rt(t){for(var r,u=[],e=t.split("\n"),f=0;f<e.length;f++)r=n.trim(e[f]),r&&(r=r.split("|"),u[u.length]={data:r,value:r[0],result:i.formatResult&&i.formatResult(r,r[0])||r[0]});return u}function w(){r.removeClass(i.loadingClass)}var f={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},r=n(t).attr("autocomplete","off").addClass(i.inputClass),h,e="",l=n.Autocompleter.Cache(i),c=0,y,b={mouseDownOnSelect:!1},u=n.Autocompleter.Select(i,t,d,b),k=navigator.userAgent.indexOf("Opera"),p;k&&n(t.form).bind("submit.autocomplete",function(){if(p)return p=!1,!1});r.bind((k?"keypress":"keydown")+".autocomplete",function(t){c=1;y=t.keyCode;switch(t.keyCode){case f.UP:t.preventDefault();u.visible()?u.prev():o(0,!0);break;case f.DOWN:t.preventDefault();u.visible()?u.next():o(0,!0);break;case f.PAGEUP:t.preventDefault();u.visible()?u.pageUp():o(0,!0);break;case f.PAGEDOWN:t.preventDefault();u.visible()?u.pageDown():o(0,!0);break;case i.multiple&&n.trim(i.multipleSeparator)==","&&f.COMMA:case f.TAB:case f.RETURN:if(d())return t.preventDefault(),p=!0,!1;break;case f.ESC:u.hide();break;default:clearTimeout(h);h=setTimeout(o,i.delay)}}).keypress(function(){lastCursorPos=r.selection().start}).mouseup(function(){lastCursorPos=r.selection().start}).focus(function(){c++}).blur(function(){c=0;b.mouseDownOnSelect||tt()}).click(function(){c++>1&&!u.visible()&&o(0,!0)}).bind("search",function(){function i(n,i){var u,f;if(i&&i.length)for(f=0;f<i.length;f++)if(i[f].result.toLowerCase()==n.toLowerCase()){u=i[f];break}typeof t=="function"?t(u):r.trigger("result",u&&[u.data,u.value])}var t=arguments.length>1?arguments[1]:null;n.each(s(r.val()),function(n,t){g(t,i,i)})}).bind("flushCache",function(){l.flush()}).bind("setOptions",function(){n.extend(i,arguments[1]);"data"in arguments[1]&&l.populate()}).bind("unautocomplete",function(){u.unbind();r.unbind();n(t.form).unbind(".autocomplete")})};n.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(n){return n[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(n,t){return n.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1<\/strong>")},scroll:!0,scrollHeight:180};n.Autocompleter.Cache=function(t){function u(n,i){t.matchCase||(n=n.toLowerCase());var r=n.indexOf(i);return(t.matchContains=="word"&&(r=n.toLowerCase().search("\\b"+i.toLowerCase())),r==-1)?!1:r==0||t.matchContains}function f(n,u){r>t.cacheLength&&o();i[n]||r++;i[n]=u}function e(){var r,h,u,c,i,e,o,s;if(!t.data)return!1;for(r={},h=0,t.url||(t.cacheLength=1),r[""]=[],u=0,c=t.data.length;u<c;u++)(i=t.data[u],i=typeof i=="string"?[i]:i,e=t.formatMatch(i,u+1,t.data.length),e!==!1)&&(o=e.charAt(0).toLowerCase(),r[o]||(r[o]=[]),s={value:e,data:i,result:t.formatResult&&t.formatResult(i)||e},r[o].push(s),h++<t.max&&r[""].push(s));n.each(r,function(n,i){t.cacheLength++;f(n,i)})}function o(){i={};r=0}var i={},r=0;return setTimeout(e,25),{flush:o,add:f,populate:e,load:function(f){var h,s,o,e;if(!t.cacheLength||!r)return null;if(!t.url&&t.matchContains){e=[];for(h in i)h.length>0&&(o=i[h],n.each(o,function(n,t){u(t.value,f)&&e.push(t)}));return e}if(i[f])return i[f];if(t.matchSubset)for(s=f.length-1;s>=t.minChars;s--)if(o=i[f.substr(0,s)],o)return e=[],n.each(o,function(n,t){u(t.value,f)&&(e[e.length]=t)}),e;return null}}};n.Autocompleter.Select=function(t,i,r,u){function p(){y&&(h=n("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),o=n("<ul/>").appendTo(h).mouseover(function(t){a(t).nodeName&&a(t).nodeName.toUpperCase()=="LI"&&(e=n("li",o).removeClass(s.ACTIVE).index(a(t)),n(a(t)).addClass(s.ACTIVE))}).click(function(t){return n(a(t)).addClass(s.ACTIVE),r(),i.focus(),!1}).mousedown(function(){u.mouseDownOnSelect=!0}).mouseup(function(){u.mouseDownOnSelect=!1}),t.width>0&&h.css("width",t.width),y=!1)}function a(n){for(var t=n.target;t&&t.tagName!="LI";)t=t.parentNode;return t?t:[]}function l(n){var r,i;f.slice(e,e+1).removeClass(s.ACTIVE);w(n);r=f.slice(e,e+1).addClass(s.ACTIVE);t.scroll&&(i=0,f.slice(0,e).each(function(){i+=this.offsetHeight}),i+r[0].offsetHeight-o.scrollTop()>o[0].clientHeight?o.scrollTop(i+r[0].offsetHeight-o.innerHeight()):i<o.scrollTop()&&o.scrollTop(i))}function w(n){e+=n;e<0?e=f.size()-1:e>=f.size()&&(e=0)}function b(n){return t.max&&t.max<n?t.max:n}function k(){var r,i,u,h;for(o.empty(),r=b(c.length),i=0;i<r;i++)c[i]&&(u=t.formatItem(c[i].data,i+1,r,c[i].value,v),u!==!1)&&(h=n("<li/>").html(t.highlight(u,v)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(o)[0],n.data(h,"ac_data",c[i]));f=o.find("li");t.selectFirst&&(f.slice(0,1).addClass(s.ACTIVE),e=0);n.fn.bgiframe&&o.bgiframe()}var s={ACTIVE:"ac_over"},f,e=-1,c,v="",y=!0,h,o;return{display:function(n,t){p();c=n;v=t;k()},next:function(){l(1)},prev:function(){l(-1)},pageUp:function(){e!=0&&e-8<0?l(-e):l(-8)},pageDown:function(){e!=f.size()-1&&e+8>f.size()?l(f.size()-1-e):l(8)},hide:function(){h&&h.hide();f&&f.removeClass(s.ACTIVE);e=-1},visible:function(){return h&&h.is(":visible")},current:function(){return this.visible()&&(f.filter("."+s.ACTIVE)[0]||t.selectFirst&&f[0])},show:function(){var e=n(i).offset(),r,u;h.css({width:typeof t.width=="string"||t.width>0?t.width:n(i).width(),top:e.top+i.offsetHeight,left:e.left}).show();t.scroll&&(o.scrollTop(0),o.css({maxHeight:t.scrollHeight,overflow:"auto"}),document.all&&typeof document.body.style.maxHeight=="undefined"&&(r=0,f.each(function(){r+=this.offsetHeight}),u=r>t.scrollHeight,o.css("height",u?t.scrollHeight:r),u||f.width(o.width()-parseInt(f.css("padding-left"))-parseInt(f.css("padding-right")))))},selected:function(){var t=f&&f.filter("."+s.ACTIVE).removeClass(s.ACTIVE);return t&&t.length&&n.data(t[0],"ac_data")},emptyList:function(){o&&o.empty()},unbind:function(){h&&h.remove()}}};n.fn.selection=function(n,t){var i,r;if(n!==undefined)return this.each(function(){if(this.createTextRange){var i=this.createTextRange();t===undefined||n==t?(i.move("character",n),i.select()):(i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",t),i.select())}else this.setSelectionRange?this.setSelectionRange(n,t):this.selectionStart&&(this.selectionStart=n,this.selectionEnd=t)});if(i=this[0],i.createTextRange){var u=document.selection.createRange(),o=i.value,f="<->",e=u.text.length;return u.text=f,r=i.value.indexOf(f),i.value=o,this.selection(r,r+e),{start:r,end:r+e}}if(i.selectionStart!==undefined)return{start:i.selectionStart,end:i.selectionEnd}}}(jQuery);var navBarMenu=new NavBarMenu("navBarMenu",".navmenu li"),signinMenu=new NavBarMenu("signinMenu",".member-signin"),memberLinksMenu=new NavBarMenu("memberLinksMenu",".member-links"),notificationsMenu=new NavBarMenu("notificationsMenu",".notification-count");(function(n){function s(o){return t=n(o.data.el),t.blur(),r=i?f(o).x:f(o).y,u=(i?t.width():t.height())-r,t.css("opacity",.25),n(document).mousemove(h).mouseup(e),!1}function h(n){var h=i?f(n).x:f(n).y,s=u+h;return r>=h&&(s-=5),r=h,s=Math.max(o,s),i?t.width(s+"px"):t.height(s+"px"),s<o&&e(n),!1}function e(){n(document).unbind("mousemove",h).unbind("mouseup",e);t&&(t.css("opacity",1),t.focus());t=null;u=null;r=0}function f(n){return{x:n.clientX+document.documentElement.scrollLeft,y:n.clientY+document.documentElement.scrollTop}}var t,u,r=0,o=32,i=!1;n.fn.TextAreaResizer=function(r){i=r;var f=document.activeElement;return this.each(function(){t=n(this).addClass("processed");u=null;i?n(this).wrap('<div class="resizable-control"><div class="wrap"><\/div><\/div>').parent().parent().append(n('<div class="grippie"> <\/div>').bind("mousedown",{el:this},s)):n(this).wrap('<div class="resizable-control"><span><\/span><\/div>').parent().append(n('<div class="grippie"> <\/div>').bind("mousedown",{el:this},s));var r=n("div.grippie",n(this).parent())[0];i?r.style.marginBottom=r.offsetHeight-n(this)[0].offsetHeight+"px":r.style.marginRight=r.offsetWidth-n(this)[0].offsetWidth+"px";f&&f.focus()})}})(jQuery);
/*!
 * hoverIntent v1.8.1 // 2014.08.11 // jQuery v1.9.1+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2014 Brian Cherne
 */
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.hoverIntent&&n(jQuery)})(function(n){"use strict";var f={interval:100,sensitivity:6,timeout:0},e=0,t,i,r=function(n){t=n.pageX;i=n.pageY},u=function(n,f,e,o){if(Math.sqrt((e.pX-t)*(e.pX-t)+(e.pY-i)*(e.pY-i))<o.sensitivity)return f.off(e.event,r),delete e.timeoutId,e.isActive=!0,n.pageX=t,n.pageY=i,delete e.pX,delete e.pY,o.over.apply(f[0],[n]);e.pX=t;e.pY=i;e.timeoutId=setTimeout(function(){u(n,f,e,o)},o.interval)},o=function(n,t,i,r){return delete t.data("hoverIntent")[i.id],r.apply(t[0],[n])};n.fn.hoverIntent=function(t,i,s){var c=e++,h=n.extend({},f),l;n.isPlainObject(t)?(h=n.extend(h,t),n.isFunction(h.out)||(h.out=h.over)):h=n.isFunction(i)?n.extend(h,{over:t,out:i,selector:s}):n.extend(h,{over:t,out:t,selector:i});l=function(t){var e=n.extend({},t),f=n(this),s=f.data("hoverIntent"),i,l;if(s||f.data("hoverIntent",s={}),i=s[c],i||(s[c]=i={id:c}),i.timeoutId&&(i.timeoutId=clearTimeout(i.timeoutId)),l=i.event="mousemove.hoverIntent.hoverIntent"+c,t.type==="mouseenter"){if(i.isActive)return;i.pX=e.pageX;i.pY=e.pageY;f.off(l,r).on(l,r);i.timeoutId=setTimeout(function(){u(e,f,i,h)},h.interval)}else{if(!i.isActive)return;f.off(l,r);i.timeoutId=setTimeout(function(){o(e,f,i,h.out)},h.timeout)}};return this.on({"mouseenter.hoverIntent":l,"mouseleave.hoverIntent":l},h.selector)}});commentConfig={baseUrl:"/script/comments/webservices/commentServices.aspx/",saveMethod:"SaveComment",updateMethod:"UpdateComment",replyMethod:"ReplyToComment",deleteMethod:"DeleteComment",getPageMethod:"GetPage"};replyDialog='\t<div id="CommentReplyForm" class="comment-reply-form" >\t\t<div class="padded-top subdue">\t\t\tEnter your reply below and click the Submit button.\t\t<\/div>\t\t<textarea id="ReplyText" cols="50" rows="4"><\/textarea><br />\t\t<input type="button" value="Submit" id="SubmitReply" name="CP-SubmitReply" class="comment-button"  />\t\t<input type="button" value="Cancel" id="CancelReply" name="CP-CancelReply" class="comment-button"  />\t\t<br />\t<\/div> ';editDialog='<div id="CommentEditForm" class="comment-edit-form" >\t\t<div class="padded-top subdue">\t\t\tEdit your comment below and click the Submit button.\t\t<\/div>\t\t<textarea id="EditText" cols="50" rows="4"><\/textarea><br />\t\t<input type="button" value="Submit" id="SubmitEdit" name="CP-SubmitEdit" class="comment-button" />\t\t<input type="button" value="Cancel" id="CancelEdit" name="CP-CancelEdit" class="comment-button" />\t\t<br />\t<\/div>';$(function(){function t(n,t){t.d.status=="OK"&&($("div[name=CP-CommentList]",n).html(t.d.html),$(".comment-commands, .comment-commands a",n).removeClass("invisible"),u(),e(),f())}function l(n,t){if(!(n.length<=0)){typeof t=="undefined"&&(t=!0);var i=n.offset().top,r=document.documentElement.clientHeight/10;t?$("html, body").animate({scrollTop:i-r},"fast"):$("html, body").scrollTop(i-r)}}var n=250,i,r;$(".container-comments").each(function(){var i=$(this);$(".comment-button-bar",i).show();$(".comment-commands, .comment-commands a",i).removeClass("invisible");$("a[id$=ShowAllButton]",i).show();$("a[id$=AddCommentButton]",i).click(function(){var t=$(this).parent().parent();return $(".comment-button-bar",t).hide(n),$(".comment-add-form",t).show(n,function(){$("textarea[id$=CommentText]",$(this)).focus()}),!1});$("input[id$=CancelCommentButton]",i).click(function(){var t=$(this).parent().parent();return $(".comment-button-bar",t).show(),$(".comment-add-form",t).hide(n),!1});$("input[id$=SubmitCommentButton]",i).click(function(){var i=$(this).parents(".container-comments"),r=$.trim($("textarea[id$=CommentText]",i).val()),u,f;return r=encodeURIComponent(r),r&&r!=""&&(u=i.find("a[id$=HideUnavailable]:visible").length>0,f='{ "objectRef": "'+i.attr("ObjectRef")+'","boldMemberId": "'+i.attr("BoldMemberId")+'", "pageSize": "'+i.attr("PageSize")+'", "showAll": "'+(u==!0?"true":"false")+'", "comment": "'+r+'" }',$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.saveMethod,data:f,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(n){n.d.status=="OK"&&(t(i,n),$("textarea[id$=CommentText]",i).val(""))},error:function(n,t){if(t=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}alert("We have tried to add your comment "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.");return}n.status==500?alert("Oops! There seems to be a server problem, please try posting your comment later."):alert("Oops! There was a problem adding your comment, sorry.")}})),$(".comment-button-bar",i).show(),$(".comment-add-form",i).hide(n),!1})});var u=function(){$(".container-comments a[id$=DeleteButton]").click(function(){var n,i,r,u;return confirm("Are you sure you wish to delete this comment?")&&(n=$(this).parents(".container-comments"),i=$(this).parents(".comment-item"),i!=undefined&&i.length>0&&(r=n.find("a[id$=HideUnavailable]:visible").length>0,u='{ "commentId": "'+i.attr("commentId")+'","boldMemberId": "'+n.attr("BoldMemberId")+'", "showAll": "'+(r==!0?"true":"false")+'", "pageSize": "'+n.attr("PageSize")+'", "pageNumber": "'+n.attr("PageNumber")+'" }',$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.deleteMethod,data:u,contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){i.d.status=="OK"&&t(n,i)}}))),!1})},f=function(){$(".container-comments a[name=CP-EditComment]").click(function(){var r;HideAllDialogs();var t=$(this).parents(".comment-item"),e=$(this).parents(".container-comments"),h=e.attr("ModifyStatus")=="True",i=$(this).parents(".comment-item"),n=$(".comment-content",t).html();n=n.replace(/\n/ig,"");n=n.replace(/\<br\>\s*&nbsp;\s*\<br\>/ig,"<br><br>");n=n.replace(/\<br\>/ig,"\n");r=i.find("div[id=ReplyDialogPlaceholder]");r.html(editDialog);var u=i.find("#CommentEditForm"),f=u.find("textarea[id=EditText]"),c=u.find("select[id=EditStatus]");return $(f).text(n),f.focus(),$(c).val($("span[id$=PubStatus]",t).text()).attr("disabled",h?"":"disabled"),o(),s(),!1})},o=function(){$(".container-comments input[name=CP-CancelEdit]").click(function(){return HideAllDialogs(),$("textarea[id=EditText]").text(""),!1})},s=function(){$(".container-comments input[name=CP-SubmitEdit]").click(function(){var n=$(this).parents(".comment-item"),i=$(n).parents(".container-comments"),r=$("textarea[id=EditText]",n).val();r=encodeURIComponent(r);var u=$("select[id=EditStatus]",n).val()||"",f=i.find("a[id$=HideUnavailable]:visible").length>0,e='{ "commentId": "'+n.attr("commentId")+'","comment": "'+r+'", "pubStatus": "'+u+'", "boldMemberId": "'+i.attr("BoldMemberId")+'", "showAll": "'+(f==!0?"true":"false")+'", "pageSize": "'+i.attr("PageSize")+'", "pageNumber": "'+i.attr("PageNumber")+'" }';HideAllDialogs();$("textarea[id=EditText]").val("");$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.updateMethod,data:e,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(r){r.d.status=="OK"&&(t(i,r),n=null)},error:function(n,t){if(t=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}alert("We have tried to update your comment "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.");return}n.status==500?alert("Oops! There seems to be a server problem, please try posting your comment later."):alert("Oops! There was a problem updating your comment, sorry.")}})})},e=function(){$(".container-comments a[name=CP-ReplyComment]").click(function(){var t;HideAllDialogs();var n=$(this).parent().parent(),i=n.attr("authorId"),r=n.parent().parent().attr("CurrentMemberId");if(i!=r||confirm("Are you sure you want to reply to your own comment?"))return t=n.find("div[id=ReplyDialogPlaceholder]"),t.html(replyDialog),h(),c(),n.find("textarea[id=ReplyText]").val("").focus(),!1})},h=function(){$(".container-comments input[name=CP-CancelReply]").click(function(){var n=$(this).parent().parent(),t=n.find("#CommentReplyForm");return HideAllDialogs(),$("textarea[id=ReplyText]").val(""),!1})},c=function(){$(".container-comments input[name=CP-SubmitReply]").click(function(){var i=$(this).parents(".comment-item"),n=$(i).parents(".container-comments"),r=$("textarea[id=ReplyText]",i).val();r=encodeURIComponent(r);var u=n.find("a[id$=HideUnavailable]:visible").length>0,f=i.attr("commentId"),e='{ "parentCommentId": "'+f+'","objectRef": "'+n.attr("ObjectRef")+'","comment": "'+r+'", "boldMemberId": "'+n.attr("BoldMemberId")+'", "showAll": "'+(u==!0?"true":"false")+'", "pageSize": "'+n.attr("PageSize")+'", "pageNumber": "'+n.attr("PageNumber")+'" }';HideAllDialogs();$("textarea[id=ReplyText]").val("");$.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.replyMethod,data:e,contentType:"application/json; charset=utf-8",dataType:"json",tryCount:0,retryLimit:3,timeout:5e3,success:function(r){r.d.status=="OK"&&(t(n,r),i=null)},error:function(n,t){if(t=="timeout"){if(this.tryCount++,this.tryCount<=this.retryLimit){$.ajax(this);return}alert("We have tried to update your comment "+this.retryLimit+" times without success. Our servers are just a little overworked. Sorry.");return}n.status==500?alert("Oops! There seems to be a server problem, please try posting your comment later."):alert("Oops! There was a problem updating your comment, sorry.")}})})};$(".container-comments .Pager a[PageNumber]").click(function(){var n=$(this).parents(".container-comments"),i=n.find("a[id$=HideUnavailable]:visible").length>0,r='{ "objectRef": "'+n.attr("ObjectRef")+'","boldMemberId": "'+n.attr("BoldMemberId")+'", "showAll": "'+(i==!0?"true":"false")+'", "pageSize": "'+n.attr("PageSize")+'", "pageNumber": "'+$(this).attr("PageNumber")+'","pagingAction": "Current" }';return $.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.getPageMethod,data:r,contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){t(n,i)}}),!1});$(".container-comments a[id$=ShowAllButton], .container-comments a[id$=HideUnavailable]").click(function(){var r=this,i=$(this).parents(".container-comments"),u=i.find("a[id$=HideUnavailable]:visible").length>0,f='{ "objectRef": "'+i.attr("ObjectRef")+'","boldMemberId": "'+i.attr("BoldMemberId")+'", "showAll": "'+(u==!0?"false":"true")+'", "pageSize": "'+i.attr("PageSize")+'", "pageNumber": "1","pagingAction": "Current" }';return $.ajax({type:"POST",cache:!1,url:commentConfig.baseUrl+commentConfig.getPageMethod,data:f,contentType:"application/json; charset=utf-8",dataType:"json",success:function(u){t(i,u);$("a[id$=ShowAllButton], a[id$=HideUnavailable]",i).show(n);$(r).hide(n)}}),!1});u();e();f();i=window.location.hash.length>3?window.location.hash.substr(4):null;i&&(r=$("#cmt-jump-"+i),r.length>0&&setTimeout(function(n){l(n,!0);n.parent().parent().addClass("selected")},500,r))});processCodeBlocks=new function(){var n=400,t=!1,r=function(n){if(!n)return null;if(!$.support.opacity)return n;var t=$("<div/>").html(n).text().trim();return t=t.replace(/\</gi,"&lt;"),t.replace(/\r\n\r\n\r\n\r\n/,"\r\n\r\n")},u=function(n){switch(n.toLowerCase()){case"text":return"Plain Text";case"aspnet":return"ASP.NET";case"cs":return"C#";case"c++":return"C++";case"vb.net":return"VB.NET";case"mc++":return"C++ / CLI";case"css":return"CSS";case"delphi":return"Delphi";case"F#":return"F#";case"html":return"HTML";case"java":return"Java";case"jscript":return"Javascript";case"asm":return"MASM / ASM";case"msil":return"MSIL";case"midl":return"MIDL";case"php":return"PHP";case"sql":return"SQL";case"vbscript":return"VBScript";case"xml":return"XML"}return n},i=function(i,r){var u,f,e,o,s;if(!i.attr("decoration")||i.attr("decoration").toLowerCase()!=="none"){if(u=i.height(),f=i.attr("id"),f&&f.length>3&&f.substring(0,3)=="pre")if(r=parseInt(f.substring(3)),r>=0&&u>0)$("#premain"+r.toString()).empty().remove();else return;else r=Math.floor(Math.random()*1e6+1),i.attr("id","pre"+r.toString());typeof r=="number"&&(i.css("margin-top","0"),e="<div class='pre-action-link' id='premain"+r.toString()+"'  style='width:100%;display:block;'>",e+="<span id='prehide"+r.toString()+"'    onclick='processCodeBlocks.togglePre("+r.toString()+");'>Hide<\/span>  &nbsp; ",(u<=0||u>n)&&(o="/images/arrow-up-16.png",s="Shrink",t&&u>0&&(o="/images/arrow-down-16.png",s="Expand"),e+="<span id='preShrink"+r.toString()+"'    onclick='processCodeBlocks.shrinkExpand("+r.toString()+");'>"+s+"<\/span> <img id='preimg"+r.toString()+"' src='"+o+"'    style='height:16px;width:16px'    onclick='processCodeBlocks.shrinkExpand("+r.toString()+");' />  &nbsp; ",t&&u>0&&(i.css("overflow","auto"),i.height(n),i.attr("shrunk","true")),u>0&&!i.attr("processed","true")),e+="<span id='copycode"+r.toString()+"' onclick='return processCodeBlocks.copyCode("+r.toString()+");'>Copy Code<\/span><\/div>",i.before(e),i.height()>0&&(i.collapsable=!0))}},f=function(n){n.addClass("notranslate")};this.Initialise=function(r,e,o){n=e||n;t=!!o;$(r+" div.code-samples").each(function(n){var t=$(this),r=t.children("pre"),i;if(r.length>1){var e="divTab"+n.toString(),o="codesampletab"+n.toString(),f=$("<div id='"+o+"' class='clearfix'><\/div>").insertAfter(t);$("<ul id='codetab"+n+"'><\/ul>").appendTo(f);i="";r.each(function(){var t=$(this),r=e+t.attr("lang").replace("#","sharp").replace("+","plus").replace(/[^a-zA-Z0-9]/,"");$("<li><a href='#"+r+"'><span>"+u(t.attr("lang"))+"<\/span><\/a><\/li>").appendTo("#codetab"+n);i+="<div id='"+r+"'><a name='"+r+"'><\/a><pre>"+t.html()+"<\/pre><\/div>"});$(i).insertAfter("#codetab"+n);t.hide();f.tabs()}});$(r+" pre").each(function(n){i($(this),n);f($(this),n)});var s=document.createElement("style");s.type="text/css";s.innerHTML=".copied::after {  position: absolute;  display: inline-block;  content: 'copied'; color: #fff; background-color: #f90;  border-radius: 3px; padding:1px 3px; opacity: 0;  will-change: opacity, transform; animation: showcopied 1.5s ease; } @keyframes showcopied { 0% { opacity: 0; transform: translateX(-100%); } 70% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; } } ";document.body.appendChild(s)};this.setupCollapsableCode=function(n){$(n).find("PRE").each(function(){i($(this))})};this.togglePre=function(n){var t=$("#pre"+n),i=$("#prehide"+n);t.toggle();t.css("display")==="none"?i.text(" Show"):i.text(" Hide")};this.shrinkExpand=function(t){var i=$("#pre"+t),r=$("#preimg"+t),u=$("#preShrink"+t);i.attr("shrunk")==="true"?(r.attr("src","/images/arrow-up-16.png"),u.text(" Shrink"),i.attr("shrunk","false"),i.height("auto")):(r.attr("src","/images/arrow-down-16.png"),u.text(" Expand"),i.attr("shrunk","true"),i.animate({height:Math.min(n,i.height())},"fast"))};this.copyCode=function(n){var u=$("#pre"+n.toString()),t=u.html(),i;return t?(t=r(t),!t)?!1:(this.copyTextToClipboard(t),i=$("#copycode"+n.toString()),i.addClass("copied"),setTimeout(function(){i.removeClass("copied")},1500),!1):!1};this.copyTextToClipboard=function(n){var t=document.createElement("textarea"),i,r;t.style.position="fixed";t.style.top=0;t.style.left=0;t.style.width="2em";t.style.height="2em";t.style.padding=0;t.style.border="none";t.style.outline="none";t.style.boxShadow="none";t.style.background="transparent";t.value=n;document.body.appendChild(t);t.select();try{i=document.execCommand("copy");r=i?"successful":"unsuccessful";console.log("Copying text command was "+r)}catch(u){console.log("Oops, unable to copy")}document.body.removeChild(t)}};